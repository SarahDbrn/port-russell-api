<%- include('partials/header'); %>

<h1>Gestion des utilisateurs</h1>

<h2>Liste des utilisateurs</h2>
<table border="1" cellpadding="5">
  <thead>
    <tr>
      <th>Nom d'utilisateur</th>
      <th>Email</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    <% if (users.length === 0) { %>
      <tr>
        <td colspan="3">Aucun utilisateur pour le moment.</td>
      </tr>
    <% } else { %>
      <% users.forEach(u => { %>
        <tr>
          <td>
            <form action="/users-page/update/<%= u._id %>" method="POST">
              <input
                type="text"
                name="username"
                value="<%= u.username %>"
                required
              />
          </td>
          <td>
              <input
                type="email"
                name="email"
                value="<%= u.email %>"
                required
              />
          </td>
          <td>
              <button type="submit">Mettre à jour</button>
            </form>

            <form action="/users-page/delete/<%= u._id %>" method="POST" onsubmit="return confirm('Supprimer cet utilisateur ?');" style="margin-top:4px;">
              <button type="submit">Supprimer</button>
            </form>
          </td>
        </tr>
      <% }) %>
    <% } %>
  </tbody>
</table>

<h2>Créer un utilisateur</h2>
<form action="/users-page/create" method="POST">
  <label>Nom d'utilisateur :</label>
  <input type="text" name="username" required />

  <label>Email :</label>
  <input type="email" name="email" required />

  <label>Mot de passe :</label>
  <input type="password" name="password" required />

  <button type="submit">Créer</button>
</form>

<%- include('partials/footer'); %>
